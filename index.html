<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ê³ ì–‘ì´ ê°€ë¼ì‚¬ëŒ€</title>
</head>
<style>
  body {
    text-align: center;
  }

  .main-card button {
    position: relative;
    left: -45px;
    bottom: 15px;
  }

  .favorites {
    list-style: none;
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 15px;
  }
</style>

<body>
  <div id="app"></div>
  <script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
  <script type="text/babel">
    /**
     * ë°”ë²¨?
     * ìƒˆì‹œëŒ€ì˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ìœ„í•œ ì»´íŒŒì¼ëŸ¬(í†µì—­ì‚¬)
     * 
     * ê°œë°œìë„êµ¬ì—ì„œ head ìª½ì— ìŠ¤í¬ë¦½íŠ¸ê°€ ì¶”ê°€ëœ ê²ƒì„ ë³¼ ìˆ˜ ìˆìŒ
     * ë¸Œë¼ìš°ì €ëŠ” ìš°ë¦¬ê°€ í•˜ë‹¨ì— ì‘ì„±í•œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì½ëŠ” ê²ƒì´ ì•„ë‹ˆë¼
     * ìƒë‹¨ì— ìƒˆë¡œ ìƒì„±ëœ headìª½ì˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì½ì–´ì„œ ì²˜ë¦¬
     * 
     * */  
      console.log("ì•¼ì˜¹");

      // í€´ì¦ˆ 1! - headerë¥¼ ìŠ¤ìŠ¤ë¡œ ë¶™ì—¬ë³´ê¸°
      // const _header = (
      //   <h1>1ë²ˆì§¸ ê³ ì–‘ì´ ê°€ë¼ì‚¬ëŒ€</h1>
      // );
      
      const Title = (props) => {
        console.log(props);

        return (
          <h1>{props.children}</h1>
        )
      }

      // í€´ì¦ˆ 2 - í¼ íƒœê·¸ ìŠ¤ìŠ¤ë¡œ ë¶™ì—¬ë³´ê¸°
      // const _form = (
      //   <form>
      //     <input type="text" name="name" placeholder="ì˜ì–´ ëŒ€ì‚¬ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”" />
      //     <button type="submit">ìƒì„±</button>
      //   </form>
      // );
      
      // 2022.01.28 í€´ì¦ˆ 1: form element ì»´í¬ë„ŒíŠ¸ë¡œ ë³€ê²½
      const Form = ({updateMainCat}) => {
        // ìƒíƒœ ë§Œë“¤ê¸° : useState
        // useStateì˜ 1ì´ë¼ëŠ” ì¸ìëŠ” ì´ˆê¸°ê°’. 1ë¶€í„° ì‹œì‘í•  ê±°ë‹ˆê¹Œ..
        // const counterState = React.useState(1);
        // counterStateëŠ” ë‘ ê°œë¡œ ë‚˜ë‰¨
        // const counter = counterState[0];
        // const setCounter = counterState[1];

        // ìœ„ì—ì²˜ëŸ¼ ì“°ë©´ ë„˜ë‚˜ ê·€ì°®ìœ¼ë‹ˆê¹Œ JavaScriptë¬¸ë²•ìœ¼ë¡œ ì•„ë˜ì™€ ê°™ì´ ë³€ê²½í•´ì„œ ì“°ë„ë¡ í•˜ì.
        
        // ìƒíƒœ ì¶”ê°€
        const [value, setValue] = React.useState('');
        // í¼ ê²€ì¦. í•œê¸€ ì…ë ¥ ë§‰ê¸°
        const includesHangul = (text) => /[ã„±-ã…|ã…-ã…£|ê°€-í£]/i.test(text);
        const [errorMessage, setErrorMessage] = React.useState(''); 

        // ì†Œë¬¸ìë¥¼ ëŒ€ë¬¸ìë¡œ ë°”ê¾¸ê¸°
        function handleInputChange(e) {          
          const userValue = e.target.value;

          if (includesHangul(userValue)) {
            setErrorMessage('í•œê¸€ì€ ì…ë ¥í•˜ì‹¤ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')
          } else {
            setErrorMessage('');
          }

          setValue(userValue.toUpperCase())
        }
        
        function handleOnSubmit(e) {
          e.preventDefault();

          // elseë¡œ ì‘ì„±í—¤ë„ ë˜ì§€ë§Œ ë§¨ ì²˜ìŒì— ì´ˆê¸°í™”ë¥¼ ë¨¼ì € í•´ì£¼ê³  ê²€ì¦í•˜ëŠ” ë°©ë²•ë„ ìˆìŒ!!!!
          setErrorMessage('');
          if (value === '') {
            setErrorMessage('ë¹ˆ ê°’ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            return;
          }

          updateMainCat();
        }

        return (
          <form onSubmit={handleOnSubmit}>
            <input 
              type="text" 
              name="name" 
              placeholder="ì˜ì–´ ëŒ€ì‚¬ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”" 
              onChange={handleInputChange}
              value={value}
              />
            <button type="submit">ìƒì„±</button>
            <p style={{color:'red'}}>{errorMessage}</p>
        </form>
        )
      }
      // ë¦¬ì•¡íŠ¸ëŠ”!
      // íƒœê·¸ ë§Œë“¤ê³ ~
      const catItem = (
        <li>
          <img src="https://cataas.com/cat/60b73094e04e18001194a309/says/react" />  
        </li>
      );
      
      // ì»´í¬ë„ŒíŠ¸ëŠ” ëŒ€ë¬¸ìë¡œ!!!!
      // ì²«ë²ˆì§¸ ì¸ìë¡œ ë°›ëŠ” ë¶€ë¶„ì— objectí˜•íƒœë¡œ ë°ì´í„°ë¥¼ ë°›ì•„ì˜´
      // style ì´ë¼ëŠ” propsë¥¼ ì´ìš©í•˜ì—¬ cssë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ. ì¸ë¼ì¸ ìŠ¤íƒ€ì¼ë§
      // ìµœê·¼ íŠ¸ëœë“œëŠ” ì´ëª¨ì…˜ ë¼ì´ë¸ŒëŸ¬ë¦¬
      // https://emotion.sh/docs/introduction
      // https://tailwindcss.com/
      function CatItem(props) {
        return (
          <li>
            <img 
              src={props.img} 
              style={{width:'150px'}}
              />  
          </li>
        )
      };

      // {} ì•ˆì— ìë°”ìŠ¤í¬ë¦½íŠ¸ ë¬¸ë²•ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ.
      // ìë°”ìŠ¤í¬ë¦½íŠ¸ í‘œí˜„ì‹ì„ ì“¸ ìˆ˜ ìˆëŠ”ë° í‘œí˜„ì‹ì´ë€ ìë°”ìŠ¤í¬ë¦½íŠ¸ ë¬¸ë²•ì„ ì¼ì„ ë•Œ ê³„ì‚°ëœ ê°’ì´ ë‚˜ì˜¤ëŠ” ê²ƒ
      // ë³€ìˆ˜ë¡œ ì‘ì„±í•œ ê±´ {}ì— ì“°ê³  ì»´í¬ë„ŒíŠ¸ëŠ” <> ë¥¼ ì“°ë‚˜....?

      // const favorites = (
      //   <ul class="favorites">
      //     <CatItem img="https://cataas.com/cat/60b73094e04e18001194a309/says/react"/>
      //     <CatItem img="https://cataas.com//cat/5e9970351b7a400011744233/says/inflearn"/>
      //     <CatItem img="https://cataas.com/cat/595f280b557291a9750ebf65/says/JavaScript"/>
      //   </ul>
      // );
      
      // ìê¾¸ ê¹Œë¨¹ëŠ”ë‹¤. ì»´í¬ë„ŒíŠ¸ëŠ” ëŒ€ë¬¸ìë¡œ ì‹œì‘í•œë‹¤. 
      function Favorites({favorites}) {
        return (
          <ul className="favorites">
            {favorites.map((cat) => (
              <CatItem img={cat} key={cat}/>
            ))}
        </ul>
        )
      }

      // maincard
      // const mainCard = (
      //   <div class="main-card">
      //     <img
      //       src="https://cataas.com/cat/60b73094e04e18001194a309/says/react"
      //       alt="ê³ ì–‘ì´"
      //       width="400"
      //     />
      //     <button>ğŸ¤</button>
      //   </div>
      // );

      // í™”ì‚´í‘œ í•¨ìˆ˜ ì“°ëŠ” ë°©ë²•, ì œëŒ€ë¡œ ìµíˆì
      // 2022.01.28 í€´ì¦ˆ 2 : MainCard ì¬ì‚¬ìš©ì„ ìœ„í•´ imgíƒœê·¸ë¥¼ propsë¡œ ë°›ì•„ì„œ ë³´ì—¬ì£¼ê¸°
      // ë°”ë¡œ ì˜¤ë¸Œì íŠ¸ë¡œ í’€ì–´ì„œ props ì¨ë³´ëŠ” ë¬¸ë²•
      // ES6+ ë””ìŠ¤íŠ¸ëŸ­ì²˜ë§ ë¬¸ë²• ì ìš© ì „
      /**
       * const MainCard = (props)=> (
       * <img src={props.img} />
       * 
       * )
       * 
       * ë¬¸ë²• ì ìš© í›„
       * 
       * const MainCard({img, alt, width}) => (
       *  <img src="img">
       * )
       * 
       * 
       * 
      */
      const MainCard = ({img, alt, width, handleHeartClick}) => {
        
        return (
          <div className="main-card">
          <img
            src = {img}
            alt= {alt}
            width= {width}
          />
          <button 
            onClick={handleHeartClick}>ğŸ¤</button>
        </div>
        )
      }
      // app : ë¦¬ì•¡íŠ¸ì—ì„œ ê·¸ë¦¬ëŠ” ê²ƒì€ ìµœìƒìœ„ íƒœê·¸ê°€ í•˜ë‚˜ì—¬ì•¼ í•¨.
      // <> : ì–˜ëŠ” ì»´í¼ë„ŒíŠ¸ íƒœê·¸ ë°©ì‹. 
      // Titleì²˜ëŸ¼ ì¼ë°˜ íƒœê·¸ì²˜ëŸ¼ ì“°ëŠ” ê²ƒë„ propsë¡œ ì¸ì‹í•˜ì—¬ ë„˜ê²¨ì¤€ë‹¤
      // const app = (
      //   <div>
      //     <Title>1ë²ˆì§¸ ê³ ì–‘ì´ ê°€ë¼ì‚¬ëŒ€</Title>
      //     <Form />
      //     <MainCard img="https://cataas.com/cat/60b73094e04e18001194a309/says/react" alt ="ê³ ì–‘ì´"  width="400" />
      //     <Favorites />
      //   </div>
      // );

      // ìƒíƒœ ëŒì–´ì˜¬ë¦¬ê¸° : Titleì´ë‘ Formì—ì„œ useStateë¥¼ ì‚¬ìš©í•´ì•¼í•¨.
      const App = () => {
        const CAT1 = "https://cataas.com/cat/60b73094e04e18001194a309/says/react";
        const CAT2 = "https://cataas.com//cat/5e9970351b7a400011744233/says/inflearn";
        const CAT3 = "https://cataas.com/cat/595f280b557291a9750ebf65/says/JavaScript";

        const [counter, setCounter] = React.useState(1);
        const [mainCat, setMainCat] = React.useState(CAT1);
        const [favorites, setFavorite] = React.useState([CAT1, CAT2]);

        function updateMainCat() {
          setMainCat(CAT2);
          setCounter(counter + 1);
        };

        function onHeartClick() {
          setFavorite([...favorites, CAT3])
        }


        return (
        <div>
          <Title>{counter}ë²ˆì§¸ ê³ ì–‘ì´ ê°€ë¼ì‚¬ëŒ€</Title>
          <Form updateMainCat={updateMainCat}/>
          <MainCard 
            img={mainCat} 
            alt ="ê³ ì–‘ì´"  
            width="400" onHeartClick={onHeartClick}/>
          <Favorites favorites={favorites}/>
        </div>
        )
      };
      
      // appendëŠ”?
      const ì—¬ê¸°ë‹¤ê°€ê·¸ë ¤ = document.querySelector("#app");
      // ReactDOM.render(app, ì—¬ê¸°ë‹¤ê°€ê·¸ë ¤);
      ReactDOM.render(<App />, ì—¬ê¸°ë‹¤ê°€ê·¸ë ¤);

      // ë§Œì•½ì— ìš”êµ¬ì‚¬í•­ì„ JavaScriptë¡œ êµ¬í˜„í•œë‹¤ë©´....
      // const likeButton = document.querySelector(".main-card button");
      // likeButton.addEventListener("click", function() {
      //   likeButton.innerHTML = "*";
      //   const favorites = document.querySelector(".favorites");
      //   const newFavoriteImage = document.createElement("img");
      //   newFavoriteImage.src = "https://cataas.com/cat/60b73094e04e18001194a309/says/react";
      //   const li = document.createElement("li");
      //   li.appendChild(newFavoriteImage);
      //   favorites.appendChild(li);
      // });
    </script>
</body>

</html>